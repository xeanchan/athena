<div class="tool">
  <span class="svg" matTooltip="障礙物" (click)="moveClick($event)">
    <svg id="svg_01" width="30" height="30" xmlns="http://www.w3.org/2000/svg">
      <g>
       <rect x="-1" y="-1" width="32" height="32" id="canvas_background" fill="#fff"/>
       <g id="canvasGrid" display="none">
        <rect width="100%" height="100%" x="0" y="0" stroke-width="0" fill="url(#gridpattern)"/>
       </g>
      </g>
      <g>
       <rect fill="#000000" stroke-width="1.5" x="111" y="151" width="41" height="28" stroke="#000"/>
       <rect class="target" fill="#ffffff" stroke-width="1.5" x="0" y="0" width="30" height="30" id="svg_1"/>
      </g>
    </svg>
  </span>

  <span class="svg" matTooltip="障礙物" (click)="moveClick($event)">
    <svg id="svg_02" width="30" height="30" xmlns="http://www.w3.org/2000/svg">
      <g>
       <rect fill="none" id="canvas_background" height="32" width="32" y="-1" x="-1"/>
       <g display="none" id="canvasGrid">
        <rect fill="url(#gridpattern)" stroke-width="0" y="0" x="0" height="100%" width="100%"/>
       </g>
      </g>
      <g>
       <rect stroke="#000" id="svg_3" height="28" width="41" y="151" x="111" stroke-width="1.5" fill="#000000"/>
       <ellipse class="target" ry="15" rx="15" id="svg_2" cy="15" cx="15" stroke-width="1.5" fill="#ffffff"/>
      </g>
     </svg>
  </span>

  <span class="svg" matTooltip="障礙物" (click)="moveClick($event)">
    <svg id="svg_03" width="30" height="30" xmlns="http://www.w3.org/2000/svg">
      <g>
       <rect x="-1" y="-1" width="32" height="32" id="canvas_background" fill="none"/>
       <g id="canvasGrid" display="none">
        <rect id="svg_1" width="100%" height="100%" x="0" y="0" stroke-width="0" fill="url(#gridpattern)"/>
       </g>
      </g>
      <g>
       <rect fill="#000000" stroke-width="1.5" x="111" y="151" width="41" height="28" stroke="#000"/>
       <path class="target" fill="#ffffff" stroke-width="1.5" d="m1.75,28.69313l13.5,-25.625l13.5,25.625l-27,0z" id="svg_3"/>
      </g>
     </svg>
  </span>
  <hr>
  <span class="svg" matTooltip="現有基站" (click)="moveClick($event)" >
    <svg id="svg_04" width="30" height="30" xmlns="http://www.w3.org/2000/svg">
      <g>
       <rect fill="none" id="canvas_background" height="32" width="32" y="-1" x="-1"/>
      </g>
      <g>
       <path class="target" fill="#ffffff" stroke="null" id="svg_4" d="m26.45453,3l-22.90908,0c-1.4,0 -2.54545,1.14545 -2.54545,2.54545l0,15.27272c0,1.4 1.14545,2.54545 2.54545,2.54545l8.90909,0l0,2.54545l-2.54545,0l0,2.54545l10.18181,0l0,-2.54545l-2.54545,0l0,-2.54545l8.90909,0c1.4,0 2.54545,-1.14545 2.54545,-2.54545l0,-15.27272c0,-1.4 -1.14545,-2.54545 -2.54545,-2.54545zm0,17.81817l-22.90908,0l0,-15.27272l22.90908,0l0,15.27272z"/>
      </g>
     </svg>
  </span>

  <span class="svg" matTooltip="新增基站" (click)="moveClick($event)" >
    <svg id="svg_05" width="30" height="30" xmlns="http://www.w3.org/2000/svg">
      <g>
        <rect fill="none" id="canvas_background" height="32" width="32" y="-1" x="-1"/>
      </g>
      <g>
        <g>
          <rect  x="0" width="24" height="24" fill="none"/>
        </g>
        <g id="svg_3">
          <g stroke="null">
            <g stroke="null">
              <path class="target" fill="#ffffff" stroke="null" id="svg_5" d="m26.60334,2.83059l-23.16898,0c-1.60735,0 -2.88164,1.28877 -2.88164,2.89612l-0.01448,17.37673c0,1.60735 1.28877,2.89612 2.89612,2.89612l23.16898,0c1.60735,0 2.89612,-1.28877 2.89612,-2.89612l0,-17.37673c0,-1.60735 -1.28877,-2.89612 -2.89612,-2.89612zm-16.6527,15.92867l-1.73767,0l-3.69256,-5.06821l0,5.06821l-1.81008,0l0,-8.68837l1.81008,0l3.62015,5.06821l0,-5.06821l1.81008,0l0,8.68837zm7.2403,-6.86381l-3.62015,0l0,1.62183l3.62015,0l0,1.82456l-3.62015,0l0,1.60735l3.62015,0l0,1.81008l-5.79224,0l0,-8.68837l5.79224,0l0,1.82456zm10.13643,5.41575c0,0.79643 -0.65163,1.44806 -1.44806,1.44806l-5.79224,0c-0.79643,0 -1.44806,-0.65163 -1.44806,-1.44806l0,-7.2403l1.81008,0l0,6.53075l1.63631,0l0,-5.09717l1.81008,0l0,5.08269l1.62183,0l0,-6.51627l1.81008,0l0,7.2403z"/>
            </g>
          </g>
        </g>
      </g>
    </svg>
  </span>
  <hr>
  <span class="svg" matTooltip="新增ＵＥ" (click)="moveClick($event)" >
    <svg id="svg_06" width="30" height="30" xmlns="http://www.w3.org/2000/svg">
      <g>
        <rect fill="none" id="canvas_background" height="32" width="32" y="-1" x="-1"/>
      </g>
      <g>
        <path fill="none" d="m0,0l24,0l0,24l-24,0l0,-24z"/>
        <path class="target" fill="#ffffff" stroke="null" id="svg_6" d="m27.1373,5.80872l1.19321,-1.19321c-2.08811,-2.08811 -4.77283,-3.13217 -7.45754,-3.13217s-5.36943,1.04406 -7.45754,3.13217l1.19321,1.19321c1.78981,-1.64066 4.02707,-2.53556 6.26434,-2.53556s4.47453,0.89491 6.26434,2.53556zm-1.34236,1.19321c-1.34236,-1.34236 -3.13217,-2.08811 -4.92198,-2.08811s-3.57962,0.74575 -4.92198,2.08811l1.19321,1.19321c1.04406,-1.04406 2.38641,-1.49151 3.72877,-1.49151c1.34236,0 2.68472,0.44745 3.72877,1.49151l1.19321,-1.19321zm-0.44745,9.39651l-2.98302,0l0,-5.96604l-2.98302,0l0,5.96604l-14.91509,0c-1.64066,0 -2.98302,1.34236 -2.98302,2.98302l0,5.96604c0,1.64066 1.34236,2.98302 2.98302,2.98302l20.88112,0c1.64066,0 2.98302,-1.34236 2.98302,-2.98302l0,-5.96604c0,-1.64066 -1.34236,-2.98302 -2.98302,-2.98302zm-16.4066,7.45754l-2.98302,0l0,-2.98302l2.98302,0l0,2.98302zm5.22028,0l-2.98302,0l0,-2.98302l2.98302,0l0,2.98302zm5.22028,0l-2.98302,0l0,-2.98302l2.98302,0l0,2.98302z"/>
      </g>
     </svg>
  </span>
</div>

<mat-sidenav-container class="example-container">
  <mat-sidenav-content>
    

  <div id="d_area">
    <button class="toggle" mat-button (click)="sidenav.toggle()"><span class="material-icons">tune</span></button>
    <h2 class="inline-block">場域規劃</h2>
    <mat-button-toggle-group class="inline-block">
      <mat-button-toggle value="save" selected>儲存</mat-button-toggle>
      <mat-button-toggle value="export">匯出</mat-button-toggle>
      <mat-button-toggle value="go" (click)="calculate()" [routerLink]="['/site/result']">開始運算</mat-button-toggle>
      <mat-button-toggle value="result" [routerLink]="['/site/result']">運算結果</mat-button-toggle>
      <mat-button-toggle value="export">3Ｄ顯示</mat-button-toggle>
    </mat-button-toggle-group>
    <!-- <div class="dropDown_area" style="background-image:url({{imageSrc}})">
      
    </div> -->
    <div #container id="chart">
      <span *ngFor="let item of obstacleList" #tooltip="matTooltip" class="dragList" [matTooltip]="tooltipStr" (click)="moveClick($event);" ></span>
      <div class="msg_label" #msgLabel></div>
    </div>
    

  </div>

  

  <ngx-moveable
    #moveable
    [target]="target"
    [draggable]="true"
    [origin]="false"
    [rotatable]="true"
    [pinchable]="true"
    [scalable]="scalable"
    [resizable]="resizable"
    [warpable]="warpable"
    [keepRatio]="false"
    [throttleDrag]="1"
    [throttleScale]="0.01"
    [throttleRotate]="0.2"
    [throttleResize]="1"
    (drag)="onDrag($event)"
    (resize)="onResize($event)"
    (scale)="onScale($event)"
    (warp)="onWarp($event)"
    (rotate)="onRotate($event)"
    (pinch)="onPinch($event)"
    (dragEnd)="onEnd()"
    (resizeEnd)="onEnd()"
    (scaleEnd)="onEnd()"
    (warpEnd)="onEnd()"
    (rotateEnd)="onEnd()"
    (pinchEnd)="onEnd()"
  ></ngx-moveable>


  </mat-sidenav-content>
  <mat-sidenav #sidenav mode="side" position="end" [(opened)]="opened" >
    <mat-accordion>
      <mat-expansion-panel (opened)="panelOpenState = true"
                           (closed)="panelOpenState = false">
        <mat-expansion-panel-header>
          <mat-panel-title>規劃目標設定</mat-panel-title>
        </mat-expansion-panel-header>
        <div class="pannel-content">
          <div><mat-checkbox [(ngModel)]="calculateForm.isAverageSinr">平均 SINR</mat-checkbox><input type="text" [(ngModel)]="calculateForm.sinrRatio" ></div>
          <div><mat-checkbox [(ngModel)]="calculateForm.isAvgThroughput">平均 Throughput</mat-checkbox><input type="text" [(ngModel)]="calculateForm.throughputRatio"></div>
          <div><mat-checkbox [(ngModel)]="calculateForm.isCoverage">場域Coverage</mat-checkbox><input type="text" [(ngModel)]="calculateForm.coverageRatio"></div>
          <div><mat-checkbox [(ngModel)]="calculateForm.isUeAvgSinr">UE 平均 SINR</mat-checkbox><input type="text" [(ngModel)]="calculateForm.ueAvgSinrRatio"></div>
          <div><mat-checkbox [(ngModel)]="calculateForm.isUeAvgThroughput">UE平均Throughput</mat-checkbox><input type="text" [(ngModel)]="calculateForm.ueAvgThroughputRatio" ></div>
          <div><mat-checkbox [(ngModel)]="calculateForm.isUeTpByDistance">UE平均Throughput最大(依距離)</mat-checkbox><input type="text" [(ngModel)]="calculateForm.ueTpByDistanceRatio"></div>
        </div>
      </mat-expansion-panel>
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>場域設定</mat-panel-title>
        </mat-expansion-panel-header>
        <ul>
          <li>
            <p>平面高度<span> ( 單位:公分，最多可設定3組高度 ) </span></p>
            <ol class="inline-block">
              <li><input type="text" [(ngModel)]="zValues[0]"></li>
              <li><input type="text" [(ngModel)]="zValues[1]"></li>
              <li><input type="text" [(ngModel)]="zValues[2]"></li>
            </ol>
          </li>

          <li>
            <p [class]="subitemClass['obstacle']">障礙物資訊<label class="matBadge">{{ obstacleList.length }}</label>
              <span class="material-icons" (click)="arrowUpDown($event, 'obstacle')" >keyboard_arrow_up</span>
            </p>
            <ol>
              <li *ngFor="let item of obstacleList">
                <span>
                  <label>X</label>
                  <input type="text" [value]="obstacleObject[item].x">
                </span>
                <span>
                  <label>Y</label>
                  <input type="text" [value]="obstacleObject[item].y">
                </span>
                <br>
                <span>
                  <label>長</label>
                  <input type="text" [value]="obstacleObject[item].width">
                </span>
                <span>
                  <label>寬</label>
                  <input type="text" [value]="obstacleObject[item].height">
                </span>
                <span>
                  <label>高</label>
                  <input type="text" [value]="obstacleObject[item].altitude">
                </span>
              </li>
            </ol>
          </li>
        
          <li>
            <p [class]="subitemClass['ue']">UE 設定<label class="matBadge">3</label>
              <span (click)="arrowUpDown($event, 'ue')" class="material-icons">keyboard_arrow_up</span>
            </p>
            <ol>
              <li>
                <span>
                  <label>X</label>
                  <input type="text">
                </span>
                <span>
                  <label>Y</label>
                  <input type="text">
                </span>
                <span>
                  <label>Z</label>
                  <select class="zAxis" name="" id="">
                    <option value="">60</option>
                  </select>
                </span>
              </li>
              <li>
                <span>
                  <label>X</label>
                  <input type="text">
                </span>
                <span>
                  <label>Y</label>
                  <input type="text">
                </span>
                <span>
                  <label>Z</label>
                  <select class="zAxis" name="" id="">
                    <option value="">60</option>
                  </select>
                </span>
              </li>
              <li>
                <span>
                  <label>X</label>
                  <input type="text">
                </span>
                <span>
                  <label>Y</label>
                  <input type="text">
                </span>
                <span>
                  <label>Z</label>
                  <select class="zAxis" name="" id="">
                    <option value="">60</option>
                  </select>
                </span>
              </li>
            </ol>
          </li>
        </ul>
        
      </mat-expansion-panel>
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>基站設定</mat-panel-title>
        </mat-expansion-panel-header>
        <ul>
          <li>
            <p>參數設定</p>
            <ul>
              <li>
                <label>傳輸功率</label>
                <span>
                  <input type="text" value="-20" placeholder="下限">~<input value="19" type="text" placeholder="上限">dBm
                </span>
              </li>
              <li>
                <label>新基站數量</label>
                <span>
                  <input type="text">
                </span>
              </li>
                <label>基站頻率</label>
                <span>
                  <select name="" id="">
                    <option value="">2.4G</option>
                    <option value="">5G</option>
                  </select>
                </span>
              <li>
                <label>系統頻寬 / 頻率</label>
                <span>
                  <select name="" id="">
                    <option value=""></option>
                  </select>
                  /
                  <input type="text">
                </span>
              </li>
            </ul>
          </li>
          <li>
            <p>現有基站<label class="matBadge">2</label></p>
            <ol>
              <li>
                <span>
                  <label>X</label>
                  <input type="text">
                </span>
                <span>
                  <label>Y</label>
                  <input type="text">
                </span>
                <span>
                  <label>Z</label>
                  <input type="text">
                </span>
              </li>
              <li>
                <span>
                  <label>X</label>
                  <input type="text">
                </span>
                <span>
                  <label>Y</label>
                  <input type="text">
                </span>
                <span>
                  <label>Z</label>
                  <input type="text">
                </span>
              </li>
            </ol>
          </li>
        </ul>
      </mat-expansion-panel>
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>待選基站位置<label class="matBadge">2</label></mat-panel-title>
        </mat-expansion-panel-header>
          <ol>
            <li>
              <span>
                <label>X</label>
                <input type="text">
              </span>
              <span>
                <label>Y</label>
                <input type="text">
              </span>
              <span>
                <label>Z</label>
                <input type="text">
              </span>
            </li>
            <li>
              <span>
                <label>X</label>
                <input type="text">
              </span>
              <span>
                <label>Y</label>
                <input type="text">
              </span>
              <span>
                <label>Z</label>
                <input type="text">
              </span>
            </li>
          </ol>
      </mat-expansion-panel>
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>無線模型參數</mat-panel-title>
        </mat-expansion-panel-header>
        <ul>
          <li>
            <label>預設無線模型</label>
            <span><select name="" id=""></select></span>
          </li>
          <li>
            <label>自訂無線模型(@jane要再給)</label>
          
            <span>
            a<input type="text">
            b<input type="text">
            c<input type="text">
            </span>
          </li>
          <li>
            <span>Path Loss Model</span>
            <select class="widthAuto">
              <option>台中智機場域</option>
            </select>
          </li>
        </ul>
      </mat-expansion-panel>
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>演算法設定</mat-panel-title>
        </mat-expansion-panel-header>
        <ul>
          <li>
            <span>C值</span>
            <input type="text">
          </li>
          <li>
            <span>天線數</span>
            <input type="text">
          </li>
          <li>
            <span>氣溫</span>
            <input type="text">
          </li> 
          <li>
            <span>節點模擬時間限制</span>
            <input type="text">
          </li> 
          <li>
            <span>本次規劃之時間限制</span>
            <input type="text">
          </li>
          <li>
            <span>本次規劃之模擬次數上限</span>
            <input type="text">
          </li>
        </ul>
      </mat-expansion-panel>
 
    </mat-accordion>    
  </mat-sidenav>
</mat-sidenav-container>
